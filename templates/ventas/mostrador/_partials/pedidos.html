{% for venta in ventas %}
<tr hx-get="/mostrador/detalle_pedido/{{ venta.id }}" 
    hx-target="#right_panel" 
    hx-swap="innerHTML" 
    style="cursor:pointer">
    <td>{{ venta.id }}</td>
    <td>{{ venta.fecha_hora.strftime('%H:%M') if venta.fecha_hora else '-' }}</td>
    <td>{{ venta.comentarios if venta.comentarios else 'Cliente Mostrador' }}</td>
    <td>
        {% set item_count = venta.productos|length if venta.productos else 0 %}
        {{ item_count }} item{{ 's' if item_count != 1 else '' }}
    </td>
    {% if venta.estado_mostrador == 3 %}
    <!-- Columna Comprobante para pedidos pagados -->
    <td>
        {% if venta.comprobante %}
            <span class="badge bg-secondary">{{ venta.comprobante.tipo_comprobante }}</span>
        {% else %}
            <span class="badge bg-light text-dark">{{ venta.numero_comprobante or '-' }}</span>
        {% endif %}
    </td>
    {% else %}
    <!-- Columna Tiempo para pedidos en preparaciÃ³n o listos -->
    <td>{{ venta.fecha_hora|timeago if venta.fecha_hora else '-' }}</td>
    {% endif %}
    <td>${{ venta.total|format_price }}</td>
    <td>
        {% if venta.estado_mostrador == 1 %}
            <button class="btn btn-sm btn-success"
                    hx-post="/mostrador/cambiar_estado/{{ venta.id }}/2"
                    hx-trigger="click"
                    onclick="event.stopPropagation()">
                Listo
            </button>
        {% elif venta.estado_mostrador == 2 %}
            <button class="btn btn-sm btn-primary"
                    hx-get="/mostrador/detalle_pedido/{{ venta.id }}"
                    hx-target="#right_panel"
                    hx-swap="innerHTML"
                    onclick="event.stopPropagation()">
                ðŸ’° Cobrar
            </button>
        {% elif venta.estado_mostrador == 3 %}
            <span class="badge bg-success">âœ“ Pagado</span>
        {% endif %}
    </td>
</tr>
{% else %}
<tr>
    <td colspan="7" class="text-center text-muted py-4">
        No hay pedidos en este estado
    </td>
</tr>
{% endfor %}
