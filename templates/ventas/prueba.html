{% extends "base.html" %}

<body>
      {% block styles %}
      <link rel="stylesheet" href="{{ url_for('static', filename='css/delivery.css') }}">
      {% endblock %}
    <div class="main-container">
        {% block left_panel %}            
            <div class="nav-tabs">
                <div class="nav-tab">Mesas</div>
                <div class="nav-tab">Mostrador</div>
                <div class="nav-tab active">Delivery</div>
            </div>

            <h1 style="font-size: 24px; margin-bottom: 24px; font-weight: 700;">DELIVERY</h1>

            <div class="delivery-section">
                <div class="section-header preparacion" onclick="toggleSection('preparacion')">
                    <span class="section-toggle">⏷</span>
                    <span class="section-title">EN PREPARACIÓN</span>
                    <span class="section-count">0</span>
                </div>
                <div class="orders-table" id="preparacion-table">
                    <div class="table-header preparacion">
                        <div>ID</div>
                        <div>Hora Inicio</div>
                        <div>Dirección</div>
                        <div>Teléfono</div>
                        <div>Cliente</div>
                        <div>Repartidor</div>
                        <div>Tiempo</div>
                        <div>Total</div>
                    </div>
                    <div class="table-body">
                        No hay pedidos
                    </div>
                </div>
                <button class="show-more-btn">Mostrar más resultados</button>
            </div>
            <div class="delivery-section">
                <div class="section-header listo" onclick="toggleSection('listo')">
                    <span class="section-toggle">⏷</span>
                    <span class="section-title">LISTO PARA ENTREGAR</span>
                    <span class="section-count">0</span>
                </div>
                <div class="orders-table" id="listo-table">
                    <div class="table-header listo">
                        <div>ID</div>
                        <div>Hora Inicio</div>
                        <div>Dirección</div>
                        <div>Teléfono</div>
                        <div>Cliente</div>
                        <div>Repartidor</div>
                        <div>Total</div>
                    </div>
                    <div class="table-body">
                        No hay pedidos
                    </div>
                </div>
                <button class="show-more-btn">Mostrar más resultados</button>
            </div>

            <div class="delivery-section">
                <div class="section-header enviados" onclick="toggleSection('enviados')">
                    <span class="section-toggle">⏷</span>
                    <span class="section-title">ENVIADOS</span>
                    <span class="section-count">0</span>
                </div>
                <div class="orders-table" id="enviados-table">
                    <div class="table-header enviados">
                        <div>ID</div>
                        <div>Hora Inicio</div>
                        <div>Dirección</div>
                        <div>Teléfono</div>
                        <div>Cliente</div>
                        <div>Repartidor</div>
                        <div>Total</div>
                    </div>
                    <div class="table-body">
                        No hay pedidos enviados
                    </div>
                </div>
                <button class="show-more-btn">Mostrar más resultados</button>
            </div>
        {% endblock %}
        {% block right_panel %}
        <div class="new-order-panel">
                <div class="new-order-header">NUEVO PEDIDO</div>
            </div>
        <div class="container w-100 border border-3 border-wa rounded p-4 mt-3">
            <form id="cliente-form" hx-post="/pruebas/save" hx-swap="innerHTML">
                    {{ form.csrf_token }}
                    <div class="row g-3">
                        <!-----------------------Cliente-------------------------------------------->
                        <div class="col-md-6 mb-2" >
                            {{ form.cliente.label(class="form-label") }}
                            {{ form.cliente(class="form-control") }}
                            {% for error in form.cliente.errors %}
                            <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <!-----------------------Teléfono-------------------------------------------->
                        <div class="col-md-6 mb-2">
                            {{ form.telefono.label(class="form-label") }}
                            {{ form.telefono(class="form-control", rows="3") }}
                            {% for error in form.telefono.errors %}
                            <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <!-----------------------Dirección-------------------------------------------->
                        <div class="col-12 mb-2">
                            {{ form.direccion.label(class="form-label") }}
                            {{ form.direccion(class="form-control", rows="3", style="resize: none;") }}
                            {% for error in form.direccion.errors %}
                            <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <!-----------------------Repartidor-------------------------------------------->
                        <div class="col-md-6 mb-2">
                            {{ form.repartidor.label(class="form-label") }}
                            {{ form.repartidor(class="form-control") }}
                        </div>
                        <!-----------------------Tiempo estimado-------------------------------------------->
                        <div class="col-md-6 mb-2">
                            {{ form.tiempo_estimado.label(class="form-label") }}
                            {{ form.tiempo_estimado(class="form-control") }}
                        </div>
                        <!-----------------------Comentarios-------------------------------------------->
                        <div class="col-12 mb-2">
                            {{ form.comentarios.label(class="form-label") }}
                            {{ form.comentarios(class="form-control", rows="3", style="resize: none;") }}
                            {% for error in form.comentarios.errors %}
                            <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <!-----------------------Botón Crear-------------------------------------------->
                        <div class="col-12 mt-3">
                            {{ form.submit(class="btn btn-primary") }}
                    </div>
            </form>
        </div>     

            <!-- Paso 2: Panel de productos -->
        <div class="step-panel" id="products-panel" style="display: none;">
            <div class="products-header">
                <h2>Agregar Productos</h2>
                <div class="order-summary">
                    <span>Cliente: <strong id="client-name"></strong></span>
                    <span>Teléfono: <strong id="client-phone"></strong></span>
                </div>
            </div>
            
            <div class="products-grid">
                <div class="categories-list">
                    <!-- Se llenará dinámicamente -->
                </div>
                
                <div class="products-list">
                    <!-- Se llenará dinámicamente -->
                </div>
            </div>

            <div class="order-items">
                <h3>Productos Seleccionados</h3>
                <div class="selected-products">
                    <!-- Lista de productos seleccionados -->
                </div>
                
                <div class="order-total">
                    <div>Subtotal: $<span id="subtotal">0</span></div>
                    <div>Envío: $<span id="shipping">0</span></div>
                    <div>Total: $<span id="total">0</span></div>
                </div>
                
                <div class="action-buttons">
                    <button class="back-btn">Volver</button>
                    <button class="payment-btn">Proceder al Pago</button>
                </div>
            </div>
        </div>
        {% endblock %}
    </div>

    <!-- Agregar al final del archivo index.html, antes de </body> -->
{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}

</body>