<!-- ventas/_partials/carrito_optimizado.html -->
<div class="products-header">
    <div class="order-summary">
        <span>Cliente: <strong>{{ cliente.nombre }}</strong></span><br>
        <span>Teléfono: <strong>{{ cliente.telefono }}</strong></span><br>
        <span>Dirección: <strong>{{ cliente.direccion }}</strong></span>     
    </div>
</div>

<!-- Productos disponibles -->
<div class="productos-disponibles mb-3">
    <h5>Agregar Productos</h5>
    <div class="row">
        {% for producto in productos %}
        <div class="col-md-4 mb-2">
            <button class="btn btn-outline-primary w-100"
                    hx-post="/delivery/agregar_al_carrito"
                    hx-vals='{"producto_id": "{{ producto.id }}", "nombre": "{{ producto.nombre }}", "precio": "{{ producto.precio }}"}'
                    hx-target="#carrito-container"
                    hx-swap="innerHTML">
                {{ producto.nombre }} - ${{ producto.precio }}
            </button>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Contenedor del carrito -->
<div id="carrito-container">
    {% include 'ventas/delivery/_partials/carrito_items.html' %}
</div>

<!-- Datos ocultos para el pedido -->
<form id="datos-pedido" style="display: none;">
    <input type="hidden" name="cliente_id" value="{{ cliente.id }}">
    <input type="hidden" name="costo_envio" value="{{ cliente.costo_envio }}">
    <input type="hidden" name="tiempo_estimado" value="{{ cliente.tiempo_estimado }}">
    <input type="hidden" name="comentarios" value="{{ cliente.comentarios }}">
    <input type="hidden" name="repartidor" value="{{ cliente.repartidor }}">
</form>